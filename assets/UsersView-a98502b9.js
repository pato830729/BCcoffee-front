import{r,b as m,k as g,S as h,c,d as u,e as t,F as b,m as D,w as S,n as v,t as d,f as i,v as n,J as k,i as x,M as V}from"./index-8da19006.js";const w=x('<div class="admin_title_search"><div class="admin_title_addDelete"><h1>會員管理</h1></div><div class="search_container"><input type="text" class="search_input" placeholder="以會員編號搜尋"><button class="admin_button button_search"><i class="fa-solid fa-magnifying-glass"></i> 搜尋 </button></div></div>',1),U={class:"admin_table"},C=t("thead",null,[t("tr",null,[t("th",{class:"table_th_id"},"會員ID"),t("th",{class:"table_th_ell"},"帳號"),t("th",{class:"table_th_ell"},"信箱"),t("th",{class:"table_th_ell"},"狀態"),t("th",{class:"table_th_short"})])],-1),q={class:"table_td_id"},M={class:"table_td_ell"},F={class:"table_td_ell"},N={class:"table_th_short"},T=["onClick"],I=t("i",{class:"fa-solid fa-pen"},null,-1),z={class:"dialogBg"},A=["onSubmit"],E=t("i",{class:"fa-solid fa-xmark"},null,-1),J=[E],L={class:"dialog_container"},$={class:"text_container"},j={class:"dialog_container_left"},G={class:"adminDialogBg_inputStyle"},H=t("label",{for:"dialog_name"},"會員ID：",-1),K={class:"input_position"},O={class:"adminDialogBg_inputStyle"},P=t("label",{for:"dialog_name"},"帳號：",-1),Q={class:"input_position"},R={class:"adminDialogBg_inputStyle"},W=t("label",{for:"dialog_name"},"信箱：",-1),X={class:"input_position"},Y={class:"adminDialogBg_selectStyle"},Z=t("label",{for:"dialog_select_sell"},"狀態：",-1),tt=t("option",{value:"false"},"正常",-1),st=t("option",{value:"true"},"停權",-1),et=[tt,st],ot={class:"dialog_container_right"},at={class:"adminDialogBg_inputStyle"},lt=t("label",{for:"dialog_name"},"姓名：",-1),it={class:"input_position"},nt={class:"adminDialogBg_inputStyle"},dt=t("label",{for:"dialog_name"},"地址：",-1),_t={class:"input_position"},ct={class:"adminDialogBg_inputStyle"},ut=t("label",{for:"dialog_name"},"電話：",-1),pt={class:"input_position"},rt=t("button",{class:"admin_button button_save",type:"submit"},"儲存",-1),bt={__name:"UsersView",setup(mt){const p=r(!1),s=m({_id:"",account:"",email:"",name:"",address:"",phone:"",suspension:!1,idx:-1}),_=()=>{const e=document.querySelector(".darkDialogBg"),a=document.querySelector(".dialogBg");e.style.display="none",a.style.display="none"},y=e=>{s._id=l[e]._id,s.account=l[e].account,s.email=l[e].email,s.name=l[e].name,s.address=l[e].address,s.phone=l[e].phone,s.suspension=l[e].suspension,r(!1),s.idx=e;const a=document.querySelector(".darkDialogBg"),o=document.querySelector(".dialogBg");a.style.display="block",o.style.display="block"},f=async()=>{if(!p.value)return;const e=new FormData;e.append("_id",s._id),e.append("account",s.account),e.append("email",s.email),e.append("name",s.name),e.append("address",s.address),e.append("phone",s.phone),e.append("suspension",s.suspension),console.log(s._id);const{data:a}=await g.patch("/users/"+s._id,e);l[s.idx]=a.result,h.fire({icon:"success",title:"成功",text:"編輯成功"}),_()},l=m([]);return(async()=>{try{const{data:e}=await g.get("/users/all");l.push(...e.result)}catch{h.fire({icon:"error",title:"失敗",text:"取得會員失敗"})}})(),(e,a)=>(c(),u(b,null,[w,t("div",U,[t("table",null,[C,t("tbody",null,[(c(!0),u(b,null,D(l,(o,B)=>(c(),u("tr",{key:o._id},[t("td",q,d(o._id),1),t("td",M,d(o.account),1),t("td",F,d(o.email),1),t("td",{class:"table_td_ell",style:V(o.suspension?"color:#e43939;":"color:#52b96c;")},d(o.suspension?"停權":"正常"),5),t("td",N,[t("button",{class:"admin_button button_controll",onClick:gt=>y(B)},[I,v("修改")],8,T)])]))),128))])])]),t("div",z,[t("form",{ref_key:"valid",ref:p,onSubmit:S(f,["prevent"])},[t("div",{class:"dialogTitle"},[v(d("編輯會員")+" "),t("div",{class:"dialogClose",onClick:_},J)]),t("div",L,[t("div",$,[t("div",j,[t("div",G,[H,t("div",K,[i(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":a[0]||(a[0]=o=>s._id=o),disabled:""},null,512),[[n,s._id]])])]),t("div",O,[P,t("div",Q,[i(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":a[1]||(a[1]=o=>s.account=o),disabled:""},null,512),[[n,s.account]])])]),t("div",R,[W,t("div",X,[i(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":a[2]||(a[2]=o=>s.email=o),disabled:""},null,512),[[n,s.email]])])]),t("div",Y,[Z,i(t("select",{id:"dialog_select_sell","onUpdate:modelValue":a[3]||(a[3]=o=>s.suspension=o)},et,512),[[k,s.suspension]])])]),t("div",ot,[t("div",at,[lt,t("div",it,[i(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":a[4]||(a[4]=o=>s.name=o),disabled:""},null,512),[[n,s.name]])])]),t("div",nt,[dt,t("div",_t,[i(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":a[5]||(a[5]=o=>s.address=o),disabled:""},null,512),[[n,s.address]])])]),t("div",ct,[ut,t("div",pt,[i(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":a[6]||(a[6]=o=>s.phone=o),disabled:""},null,512),[[n,s.phone]])])])])]),t("div",{class:"dialog_btn_container"},[t("button",{class:"admin_button button_close",onClick:_},"取消"),rt])])],40,A)]),t("div",{class:"darkDialogBg",onClick:_})],64))}};export{bt as default};
