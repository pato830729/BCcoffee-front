import{b as h,r as g,k as p,S as d,c as b,d as y,e as t,n as _,F as w,m as D,w as S,t as n,f as c,v as k,J as B,M as x}from"./index-8da19006.js";const C={class:"admin_title_search"},V={class:"admin_title_addDelete"},Q=t("h1",null,"Q&A管理",-1),A=t("i",{class:"fa-solid fa-circle-plus"},null,-1),M=t("div",{class:"search_container"},[t("input",{type:"text",class:"search_input",placeholder:"以Q&A編號搜尋"}),t("button",{class:"admin_button button_search"},[t("i",{class:"fa-solid fa-magnifying-glass"}),_(" 搜尋 ")])],-1),U={class:"admin_table"},$=t("thead",null,[t("tr",null,[t("th",{class:"table_th_id"},"Q&A ID"),t("th",{class:"table_th_ell"},"問題"),t("th",{class:"table_th_ell"},"回答"),t("th",{class:"table_th_short"},"分類"),t("th",{class:"table_th_short"},"狀態"),t("th",{class:"table_th_short"})])],-1),F={class:"table_td_id"},T={class:"table_td_ell"},N={class:"table_td_ell"},z={class:"table_th_short"},E={class:"table_th_short"},I=["onClick"],J=t("i",{class:"fa-solid fa-pen"},null,-1),L={class:"dialogBg"},j=["onSubmit"],G={class:"dialogTitle"},H=t("i",{class:"fa-solid fa-xmark"},null,-1),K=[H],O={class:"dialog_container"},P={class:"text_container"},R={class:"dialog_container_left"},W={class:"adminDialogBg_textareaStyle"},X=t("label",{for:"dialog_question"},"問題：",-1),Y={class:"adminDialogBg_textareaStyle"},Z=t("label",{for:"dialog_answer"},"回答：",-1),tt={class:"dialog_container_right"},st={class:"adminDialogBg_selectStyle"},et=t("label",{for:"dialog_select_show"},"狀態：",-1),ot=t("option",{value:"true",selected:""},"上架",-1),at=t("option",{value:"false"},"下架",-1),lt=[ot,at],nt={class:"adminDialogBg_selectStyle"},it=t("label",{for:"dialog_select_category"},"問題分類：",-1),dt=t("option",{value:"交易相關問題",selected:""},"交易相關問題",-1),ct=t("option",{value:"食材相關問題"},"食材相關問題",-1),_t=t("option",{value:"運輸相關問題"},"運輸相關問題",-1),rt=[dt,ct,_t],ut=t("button",{class:"admin_button button_save",type:"submit"},"儲存",-1),bt={__name:"QaView",setup(ht){const l=h([]),f=g(!1),s=h({_id:"",question:"",answer:"",show:!1,category:"",idx:-1}),r=h({name:"",description:""});function m(o){r[o]=!0}const i=()=>{const o=document.querySelector(".darkDialogBg"),e=document.querySelector(".dialogBg");o.style.display="none",e.style.display="none"},v=o=>{o===-1?(s._id="",s.question="",s.answer="",s.show=!1,s.category="",g(!1),s.idx=-1):(s._id=l[o]._id,s.question=l[o].question,s.answer=l[o].answer,s.show=l[o].show,s.category=l[o].category,g(!1),s.idx=o);for(const u in r)r[u]=!1;const e=document.querySelector(".darkDialogBg"),a=document.querySelector(".dialogBg");e.style.display="block",a.style.display="block"},q=async()=>{if(!f.value)return;const o=new FormData;o.append("question",s.question),o.append("answer",s.answer),o.append("show",s.show),o.append("category",s.category);try{if(s._id.length===0){const{data:e}=await p.post("/qa",o);l.push(e.result),d.fire({icon:"success",title:"成功",text:"新增成功"}),i()}else{const{data:e}=await p.patch("/qa/"+s._id,o);l[s.idx]=e.result,d.fire({icon:"success",title:"成功",text:"編輯成功"}),i()}}catch(e){d.fire({icon:"error",title:"失敗",text:e?.response?.data?.message||"發生錯誤"})}};return(async()=>{try{const{data:o}=await p.get("/qa/all");l.push(...o.result)}catch(o){d.fire({icon:"error",title:"失敗",text:o?.response?.data?.message||"發生錯誤"})}})(),(o,e)=>(b(),y(w,null,[t("div",C,[t("div",V,[Q,t("button",{class:"admin_button button_add",onClick:e[0]||(e[0]=a=>v(-1))},[A,_(" 新增 ")])]),M]),t("div",U,[t("table",null,[$,t("tbody",null,[(b(!0),y(w,null,D(l,(a,u)=>(b(),y("tr",null,[t("td",F,n(a._id),1),t("td",T,n(a.question),1),t("td",N,n(a.answer),1),t("td",z,n(a.category),1),t("td",{class:"table_th_short",style:x(a.show?"color:#52b96c;":"color:#e43939;")},n(a.show?"上架":"下架"),5),t("td",E,[t("button",{class:"admin_button button_controll",onClick:gt=>v(u)},[J,_("修改")],8,I)])]))),256))])])]),t("div",L,[t("form",{ref_key:"valid",ref:f,onSubmit:S(q,["prevent"])},[t("div",G,[_(n(s._id.length>0?"編輯Q&A":"新增Q&A")+" ",1),t("div",{class:"dialogClose",onClick:i},K)]),t("div",O,[t("div",P,[t("div",R,[t("div",W,[X,c(t("textarea",{id:"dialog_question",rows:"10","onUpdate:modelValue":e[1]||(e[1]=a=>s.question=a),onBlur:e[2]||(e[2]=a=>m("question"))},null,544),[[k,s.question]])]),t("div",Y,[Z,c(t("textarea",{id:"dialog_answer",rows:"10","onUpdate:modelValue":e[3]||(e[3]=a=>s.answer=a),onBlur:e[4]||(e[4]=a=>m("answer"))},null,544),[[k,s.answer]])])]),t("div",tt,[t("div",st,[et,c(t("select",{id:"dialog_select_show","onUpdate:modelValue":e[5]||(e[5]=a=>s.show=a)},lt,512),[[B,s.show]])]),t("div",nt,[it,c(t("select",{id:"dialog_select_category","onUpdate:modelValue":e[6]||(e[6]=a=>s.category=a)},rt,512),[[B,s.category]])])])]),t("div",{class:"dialog_btn_container"},[t("button",{class:"admin_button button_close",onClick:i},"取消"),ut])])],40,j)]),t("div",{class:"darkDialogBg",onClick:i})],64))}};export{bt as default};
