import{r as p,b as g,k as v,S as f,c as u,d as r,e as t,F as m,m as B,w as D,n as h,t as _,f as n,v as d,i as k}from"./index-8da19006.js";const S=k('<div class="admin_title_search"><div class="admin_title_addDelete"><h1>訂單管理</h1></div><div class="search_container"><input type="text" class="search_input" placeholder="以訂單編號搜尋"><button class="admin_button button_search"><i class="fa-solid fa-magnifying-glass"></i> 搜尋 </button></div></div>',1),w={class:"admin_table"},V=t("thead",null,[t("tr",null,[t("th",{class:"table_th_id"},"訂單ID"),t("th",{class:"table_th_ell"},"日期"),t("th",{class:"table_th_ell"},"會員帳號"),t("th",{class:"table_th_ell"},"金額"),t("th",{class:"table_th_ell"},"付款方式"),t("th",{class:"table_th_short"})])],-1),x={class:"table_td_id"},C={class:"table_td_ell"},P={class:"table_td_ell"},U={class:"table_td_ell"},q={class:"table_td_ell"},N={class:"table_th_short"},L=["onClick"],O=t("i",{class:"fa-solid fa-pen"},null,-1),T={class:"dialogBg"},F=t("i",{class:"fa-solid fa-xmark"},null,-1),I=[F],M={class:"dialog_container"},z={class:"text_container"},A={class:"dialog_container_left"},E={class:"adminDialogBg_inputStyle"},J=t("label",{for:"dialog_name"},"訂單ID：",-1),$={class:"input_position"},j={class:"adminDialogBg_inputStyle"},G=t("label",{for:"dialog_name"},"會員帳號：",-1),H={class:"input_position"},K={class:"adminDialogBg_inputStyle"},Q=t("label",{for:"dialog_name"},"訂單金額：",-1),R={class:"input_position"},W={class:"dialog_container_right"},X={class:"adminDialogBg_inputStyle"},Y=t("label",{for:"dialog_name"},"取貨姓名：",-1),Z={class:"input_position"},tt={class:"adminDialogBg_inputStyle"},st=t("label",{for:"dialog_name"},"取貨電話：",-1),et={class:"input_position"},at={class:"adminDialogBg_inputStyle"},lt=t("label",{for:"dialog_name"},"取貨地址：",-1),ot={class:"input_position"},it={class:"adminDialogBg_inputStyle"},nt=t("label",{for:"dialog_name"},"付款方式：",-1),dt={class:"input_position"},rt={__name:"OrdersView",setup(_t){const y=p(!1),a=g({_id:"",account:"",totalPrice:"",name:"",address:"",phone:"",payway:"",idx:-1}),c=()=>{const l=document.querySelector(".darkDialogBg"),e=document.querySelector(".dialogBg");l.style.display="none",e.style.display="none"},b=l=>{a._id=o[l]._id,a.account=o[l].u_id.account,a.totalPrice=o[l].totalPrice,a.name=o[l].name,a.address=o[l].address,a.phone=o[l].phone,a.payway=o[l].payway,p(!1),a.idx=l;const e=document.querySelector(".darkDialogBg"),s=document.querySelector(".dialogBg");e.style.display="block",s.style.display="block"},o=g([]);return(async()=>{try{const{data:l}=await v.get("/orders/all");o.push(...l.result.map(e=>(console.log(e),e.totalPrice=e.products.reduce((s,i)=>(console.log(i),JSON.parse(i.custom).size=="L"?s+i.p_id.lprice*i.quantity:s+i.p_id.mprice*i.quantity),0),e)))}catch(l){console.log(l),f.fire({icon:"error",title:"失敗",text:"取得訂單失敗"})}})(),(l,e)=>(u(),r(m,null,[S,t("div",w,[t("table",null,[V,t("tbody",null,[(u(!0),r(m,null,B(o,(s,i)=>(u(),r("tr",{key:s._id},[t("td",x,_(s._id),1),t("td",C,_(new Date(s.date).toLocaleDateString()),1),t("td",P,_(s.u_id.account),1),t("td",U,_(s.totalPrice),1),t("td",q,_(s.payway=="cash"?"貨到付款":"線上刷卡"),1),t("td",N,[t("button",{class:"admin_button button_controll",onClick:ct=>b(i)},[O,h("查看")],8,L)])]))),128))])])]),t("div",T,[t("form",{ref_key:"valid",ref:y,onSubmit:e[7]||(e[7]=D((...s)=>l.submit&&l.submit(...s),["prevent"]))},[t("div",{class:"dialogTitle"},[h(_("查看訂單明細")+" "),t("div",{class:"dialogClose",onClick:c},I)]),t("div",M,[t("div",z,[t("div",A,[t("div",E,[J,t("div",$,[n(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":e[0]||(e[0]=s=>a._id=s),disabled:""},null,512),[[d,a._id]])])]),t("div",j,[G,t("div",H,[n(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":e[1]||(e[1]=s=>a.account=s),disabled:""},null,512),[[d,a.account]])])]),t("div",K,[Q,t("div",R,[n(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":e[2]||(e[2]=s=>a.totalPrice=s),disabled:""},null,512),[[d,a.totalPrice]])])])]),t("div",W,[t("div",X,[Y,t("div",Z,[n(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":e[3]||(e[3]=s=>a.name=s),disabled:""},null,512),[[d,a.name]])])]),t("div",tt,[st,t("div",et,[n(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":e[4]||(e[4]=s=>a.phone=s),disabled:""},null,512),[[d,a.phone]])])]),t("div",at,[lt,t("div",ot,[n(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":e[5]||(e[5]=s=>a.address=s),disabled:""},null,512),[[d,a.address]])])]),t("div",it,[nt,t("div",dt,[n(t("input",{type:"text",id:"dialog_name","onUpdate:modelValue":e[6]||(e[6]=s=>a.payway=s),disabled:""},null,512),[[d,a.payway]])])])])]),t("div",{class:"dialog_btn_container"},[t("button",{class:"admin_button button_close",onClick:c},"關閉")])])],544)]),t("div",{class:"darkDialogBg",onClick:c})],64))}};export{rt as default};
